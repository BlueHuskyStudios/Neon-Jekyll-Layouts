---
layout: general
---

{%- assign posts = site.posts %}

Before:
{%- include __test__print-post-list.html posts=posts %}

<!-- --- -->

{%- if site.post-list.sort-by %}
    {%- assign sort-fields = site.post-list.sort-by | reverse %}

    {{ sort-fields | jsonify }}

    {%- for sort-field-holder in sort-fields %}

        Sort field holder: {{ sort-field-holder }}

        {%- assign sort-field = sort-field-holder.field %}
        Sort field: {{ sort-field }}

        {%- assign sort-type  = sort-field-holder.direction | default: "descending" %}
        {%- assign sort-field = sort-field-holder.field %}

        {%- assign sort-field-backup = sort-field-holder.backup %}


        {%- for post in posts %}
            {{ post[sort-field] | default: post[sort-field-backup] }}
            {%- assign post.mysort = post[sort-field] | default: post[sort-field-backup] %}
            Sort field for this post is {{ post.mysort | jsonify }}


        {% endfor %}

        {%- comment %}
        {%- if sort-type == "ascending" %}
            {%- assign posts = posts | sort: "mysort" | reverse %}
        {%- else %}
            {%- assign posts = posts | sort: "mysort" %}
        {%- endif %}
        {%- endcomment %}

Sort step {{ forloop.index }} ({{ sort-field }}):
{%- include __test__print-post-list.html posts=posts %}
    {%- endfor %}
{%- endif %}

{{ content }}

<div class="posts   link-style-underline-on-hover   flex-row flex-wrap flex-horiz-stretch flex-horiz-center flex-vert-top">
    {%- for post in posts %}
    {% if post.categories contains 'Separator' %}
    <article class="post separator">
        <h1>{{ post.title }}</h1>
        <div class="entry">
            {{ post.excerpt }}
        </div>
    </article>
    {%- else %}
    <article class="post   flex-column flex-vert-space-between   card">
        <section>
            <h1><a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></h1>

            {%- if post.content-warning %}
            {% include content-warning.html
                message=post.content-warning
                compact=true
                %}
            {%- endif %}

            <div class="entry">
            {%- if post.categories contains 'Micro' %}
                {{ post.content }}
            {%- else %}
                {{ post.excerpt }}
            {%- endif %}
            </div>

            {% if post.social-preview-image %}
            <a href="{{ site.baseurl }}{{ post.url }}" class="preview-link">
                <img src="{{ post.social-preview-image }}" class="preview" />
            </a>
            {% endif %}
        </section>

        <footer class="flex-row flex-wrap flex-horiz-space-between flex-vert-center">
            <ol class="plain">
                <li><time class="date" datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%a. %F at %R" }}</time></li>
                {%- if post.date-edit %}
                <li><time class="date date-edit" datetime="{{ post.date-edit | date_to_xmlschema }}">Updated {{ post.date-edit | date: "%a. %F at %R" }}</time></li>
                {%- endif %}
            </ol>

            <ol class="chips   plain   flex-row flex-wrap flex-horiz-center flex-vert-center">
                {%- for category in post.categories %}
                {%- if site.post-list.categories-to-display contains category
                    or site.post-list.display-all-categories %}
                <li><span class="chip" disabled data-category-name="{{ category }}">{{ category }}</span></li>
                {%- endif %}
                {%- endfor %}
            </ol>

            {%- unless post.categories contains 'Micro' %}
            <a href="{{ site.baseurl }}{{ post.url }}" class="small low-emphasis button">{{ page.read-more-button-text | default: "Read More" }}</a>
            {%- else %}
            <span class="placeholder"></span>
            {%- endunless %}
        </footer>
    </article>
    {% endif %}

    {%- endfor %}
</div>
